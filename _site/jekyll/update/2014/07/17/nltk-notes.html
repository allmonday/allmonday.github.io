<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>kikodo</title>
        <link href="http://cdn.staticfile.org/twitter-bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="http://cdn.staticfile.org/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
        <link href="http://cdn.staticfile.org/highlight.js/8.0/styles/default.min.css" rel="stylesheet">

        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <script src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script>
        <script type="text/javascript" src="/js/jquery-scrolltofixed.min.js"></script>
        <script>
          $(document).ready(function () {
            console.log('hi');
            $('.header').scrollToFixed();
          })
        </script>

    </head>
    <body>

        <div class="site">
          <div class="content-container">
            <div class="content-sidebar" style="background: #eee;" >
              <div class="content-sidebar-header">
                <a href="/">
                <img src="/images/avatar.JPG" class="avatar" alt="">
                </a>
              </div>
              <div class="header">
                <h1 class="title text-center"><a href="/">tangkikodo <span>python,js</span></a></h1>
              </div>
              </div>
            <div class="content-mainbar">
              <h1>NLTK: python natural language toolkit</h1>
<p class="meta">17 Jul 2014</p>

<code>未完有机会待续</code>


<div class="post">
<h2>corpus 语料处理</h2>

<h3>nltk&#39;s book</h3>

<p>基本操作</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">nltk.book</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">text1</span><span class="o">.</span><span class="n">concordance</span><span class="p">(</span><span class="s">&quot;monstrous&quot;</span><span class="p">)</span>  <span class="c">#查看monstrous的上下文</span>
<span class="n">text1</span><span class="o">.</span><span class="n">similar</span><span class="p">(</span><span class="s">&quot;monstrous&quot;</span><span class="p">)</span> <span class="c">#查看上下文相同的词</span>
<span class="n">text1</span><span class="o">.</span><span class="n">common_contexts</span><span class="p">([</span><span class="s">&quot;monstrous&quot;</span><span class="p">,</span> <span class="s">&quot;very&quot;</span><span class="p">])</span>  <span class="c">#相同的上下文</span>
<span class="n">text1</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span> <span class="c">#输出随机段落</span>
</code></pre></div>
<p>词频统计</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#freqdist 统计词频</span>
<span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">nltk.book</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">fdist1</span> <span class="o">=</span> <span class="n">freqdist</span><span class="p">(</span><span class="n">text1</span><span class="p">)</span>
<span class="n">fdist1</span><span class="p">[</span><span class="s">&#39;whale&#39;</span><span class="p">]</span>  <span class="c">#whale这个词出现的次数</span>
<span class="n">fdist1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">cumulative</span><span class="o">=</span><span class="n">true</span><span class="p">)</span> <span class="c">#统计图,前50个词的累积图</span>
<span class="c">#!!高频词太常见,低频词太多</span>

<span class="c">#长度大于7并且频次大于7</span>
<span class="n">fdist5</span> <span class="o">=</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">text5</span><span class="p">)</span>
<span class="nb">sorted</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">text5</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">7</span> <span class="ow">and</span> <span class="n">fdist5</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span>
</code></pre></div>
<p>搭配和双连词</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#tool</span>
<span class="n">bigrams</span><span class="p">([</span><span class="s">&quot;more&quot;</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="s">&quot;said&quot;</span><span class="p">,</span> <span class="s">&quot;than&quot;</span><span class="p">])</span>
<span class="n">text4</span><span class="o">.</span><span class="n">collocations</span><span class="p">()</span>  <span class="c">#输出text4的高频双连词</span>
</code></pre></div>
<h3>NLTK频率分布类中定义的函数</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">fdist = FreqDist(samples) 
fdist.inc(samples)
fdist[&#39;monstrous&#39;]
fdist.freq(&#39;monstrous&#39;)
fdist.N()
fdist.keys()
for sample in fdist:  #descending
fdist.max()
fdist.tabulate()
fdist.plot()
fdist.plot(cumulative=True)
fdist1 &lt; fdist2 
</code></pre></div>
<h3>处理网络信息</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://news.bbc.co.uk/2/hi/health/2284783.stm&quot;</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">clean_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="n">text</span><span class="o">.</span><span class="n">concordance</span><span class="p">(</span><span class="s">&#39;gene&#39;</span><span class="p">)</span>
</code></pre></div>
<h3>work flow</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#html-&gt;ascii-&gt;text-&gt;vocab</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">clean_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">raw</span> <span class="o">=</span> <span class="n">raw</span><span class="p">[</span><span class="n">xx</span> <span class="p">:</span> <span class="n">xxx</span><span class="p">]</span>

<span class="n">tokens</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">xx</span><span class="p">:</span> <span class="n">xxx</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">text</span><span class="p">]</span>
<span class="n">vocab</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">words</span><span class="p">))</span>
</code></pre></div>
<h3>对中文进行分析</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">words</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;xxx.data&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
<span class="n">fdist</span> <span class="o">=</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">PlaintextCorpusReader</span>
<span class="n">corpus_root</span> <span class="o">=</span> <span class="s">&#39;./dict&#39;</span>
<span class="n">wordlists</span> <span class="o">=</span> <span class="n">PlaintextCorpusReader</span><span class="p">(</span><span class="n">corpus_root</span><span class="p">,</span> <span class="s">&quot;.*&quot;</span><span class="p">)</span>
<span class="n">wordlists</span><span class="o">.</span><span class="n">fileids</span><span class="p">()</span>
<span class="n">wordlist</span><span class="o">.</span><span class="n">words</span><span class="p">()</span>
</code></pre></div>
<p>nltk.Text()</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">unicode_text</span> <span class="o">=</span> <span class="s">u&#39;</span><span class="se">\u015b</span><span class="s">wiatowej&#39;</span>
<span class="n">unicode_text</span> <span class="o">=</span> <span class="n">unicode_text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">unicode_text</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
</code></pre></div>
<h3>wordnet</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">wordnet</span> <span class="k">as</span> <span class="n">wn</span>
<span class="n">wn</span><span class="o">.</span><span class="n">synsets</span><span class="p">(</span><span class="s">&#39;motorcar&#39;</span><span class="p">)</span>
<span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s">&#39;car.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lemma_names</span> <span class="c">#同义词集</span>
<span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s">&#39;car.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">definition</span> <span class="c">#定义</span>
<span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s">&#39;car.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">examples</span>
</code></pre></div>
<h3>unicode</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">codecs</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
</code></pre></div>
</div>

<div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'allmonday'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
</div>
            </div>
          </div>
        </div>

    </body>
</html>
