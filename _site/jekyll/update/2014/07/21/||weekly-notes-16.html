<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>kikodo</title>
        <link href="http://cdn.staticfile.org/twitter-bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="http://cdn.staticfile.org/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
        <link href="http://cdn.staticfile.org/highlight.js/8.0/styles/default.min.css" rel="stylesheet">

        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <script src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script>
        <script type="text/javascript" src="/js/jquery-scrolltofixed.min.js"></script>
        <script>
          $(document).ready(function () {
            console.log('hi');
            $('.header').scrollToFixed();
          })
        </script>

    </head>
    <body>

        <div class="site">
          <div class="content-container">
            <div class="content-sidebar" style="background: #eee;" >
              <div class="content-sidebar-header">
                <a href="/">
                <img src="/images/avatar.JPG" class="avatar" alt="">
                </a>
              </div>
              <div class="header">
                <h1 class="title text-center"><a href="/">tangkikodo <span>python,js</span></a></h1>
              </div>
              </div>
            <div class="content-mainbar">
              <h1>工作记录 - pandas, python, css ..</h1>
<p class="meta">21 Jul 2014</p>

<code>workwork</code>


<div class="post">
<h2>使用pandas对价格进行判断</h2>

<h3>playground/pds.py</h3>

<p>使用fiveNumber, 即箱线图的方式来区分异常价格</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pymongo</span> <span class="kn">import</span> <span class="n">MongoClient</span>
<span class="kn">from</span> <span class="nn">bson.objectid</span> <span class="kn">import</span> <span class="n">ObjectId</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c"># setUp </span>

<span class="n">prods</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s">&#39;192.168.1.202&#39;</span><span class="p">)[</span><span class="s">&#39;dev&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">products</span> 
<span class="n">query</span> <span class="o">=</span> <span class="n">prods</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s">&#39;_id&#39;</span><span class="p">:</span><span class="n">ObjectId</span><span class="p">(</span><span class="s">&quot;53bce82e8ddf879f99703ee9&quot;</span><span class="p">)})</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">query</span><span class="p">[</span><span class="s">&#39;_unitPrice&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">find_limits</span><span class="p">(</span><span class="n">describe</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;find upper and lower limits from five number&#39;&#39;&#39;</span>
    <span class="n">IQR</span> <span class="o">=</span> <span class="n">describe</span><span class="p">[</span><span class="s">&#39;75%&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">describe</span><span class="p">[</span><span class="s">&#39;25%&#39;</span><span class="p">]</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">IQR</span>
    <span class="n">upper_limit</span> <span class="o">=</span> <span class="n">describe</span><span class="p">[</span><span class="s">&#39;75%&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">delta</span>
    <span class="n">lower_limit</span> <span class="o">=</span> <span class="n">describe</span><span class="p">[</span><span class="s">&#39;25%&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">delta</span>
    <span class="k">return</span> <span class="n">lower_limit</span><span class="p">,</span> <span class="n">upper_limit</span>
<span class="c">#print(prices)</span>
<span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
<span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">T</span>
<span class="n">frame</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">]</span>
<span class="n">frame</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&#39;int32&#39;</span><span class="p">)</span>
<span class="n">de</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="n">l</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="n">find_limits</span><span class="p">(</span><span class="n">de</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span> <span class="n">frame</span><span class="o">.</span><span class="n">price</span> <span class="o">&lt;</span> <span class="n">l</span> <span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span> <span class="n">frame</span><span class="o">.</span><span class="n">price</span> <span class="o">&gt;</span> <span class="n">u</span> <span class="p">])</span>
</code></pre></div>
<h2>nlp</h2>

<h3>calculate the coverage of words from wordmaker</h3>

<p>只有28.0%, 许多词太长了需要截短才能找到..</p>

<h3>src/caigen/nlp/commands/process_reviews.py</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">rq</span> <span class="kn">import</span> <span class="n">Queue</span><span class="p">,</span> <span class="n">Connecction</span><span class="p">,</span> <span class="n">Worker</span>
<span class="k">def</span> <span class="nf">worker</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">Connecction</span><span class="p">(</span><span class="n">Redis</span><span class="p">()):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Worker</span><span class="p">(</span><span class="n">Queue</span><span class="p">(</span><span class="s">&#39;review_nlp&#39;</span><span class="p">))</span>
        <span class="n">w</span><span class="o">.</span><span class="n">work</span><span class="p">()</span>
</code></pre></div>
<h2>css</h2>

<p><a href="http://www.w3.org/TR/CSS21/visuren.html">visual formatting model</a>  </p>

<p><a href="http://css-tricks.com/">css tricks</a></p>

<h2>flatten</h2>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#yield from.. see PEP380</span>
<span class="k">def</span> <span class="nf">walker</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>                                                                          
   <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>                                                             
       <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>                                                                     
           <span class="k">yield</span> <span class="n">k</span>                                                                     
           <span class="k">yield from</span> <span class="n">walker</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>                                                     
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="s">&#39;c&#39;</span><span class="p">}}</span>

<span class="c">#flatten nested list.</span>
<span class="k">def</span> <span class="nf">flat</span><span class="p">(</span><span class="n">nested</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">nested</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">subele</span> <span class="ow">in</span> <span class="n">flatten_v3</span><span class="p">(</span><span class="n">ele</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">subele</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">nested</span>
</code></pre></div>
<h2>read PEP8 again</h2>

<p><a href="http://legacy.python.org/dev/peps/pep-0008/">link</a></p>

<h2>Redis</h2>

<p>redis is an in-memory remote database that offers high performance,
replication, and a unique data model to produce a platform for solving problems.</p>

<p>supporting five different types of data structs</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#types
STRING
    set hello world
    get hello
LIST
    rpush list-key item1
    rpush list-key item2
    lrange list-key 0 -1
    lindex list-key 1
    lpop list-key
    lrange list-key 0 -1
SET
    sadd set-key item
    sadd set-key item2
    sadd set-key item3
    sadd set-key item //return (integer) 0
    smembers set-key
    sismember set-key item4
    sismember set-key item
    srem set-key item2
    smembers set-key
HASH
    hset hash-key sub-key1 value1
    hset hash-key sub-key2 value2
    hset hash-key sub-key1 value1
    hgetall hash-key
    hdel hash-key sub-key2
    hdel hash-key sub-key2
    hget hash-key sub-key1
    hgetall hash-key
ZSET
    zadd zset-key 728 member1
    zadd zset-key 982 member0
    zadd zset-key 982 member0
    zrange zset-key 0 -1 withscores
    zrange zset-key 0 800 withscores
    zrem zset-key member1
    zrem zset-key member1
    zrange zset-key 0 -1 withscores
</code></pre></div>
<h2>selenium</h2>

<h3>simple usage</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="s">&quot;Python&quot;</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span>
<span class="n">elem</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;q&quot;</span><span class="p">)</span>
<span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">&quot;selenium&quot;</span><span class="p">)</span>
<span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">RETURN</span><span class="p">)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<h3>write tests</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>

<span class="k">class</span> <span class="nc">PythonOrgSearch</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_search_in_python_org</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;q&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">&quot;selenium&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">RETURN</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>
<h3>xpath</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">element</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//select[@name=&#39;name&#39;]&quot;</span><span class="p">)</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//input[@id=&#39;kw1&#39;]&quot;</span><span class="p">)</span>
</code></pre></div>
<p>if there&#39;s more than one element that matched the query, then only
    the first will be returned.If nothing can be found, a <code>NoSuchElementException</code>
    will be raised</p>

<h3>interacting with page</h3>

<p>You can easily clear the contents of a text field or textarea with <code>clear</code> method:
<code>python
element.clear()
</code></p>

<h3>filling in forms</h3>

<p><code>toggle</code> the state of drop down
use <code>setSelected</code> to set something like an OPTION tage selected
```python</p>

<h2>example</h2>

<p>element = driver.find<em>element</em>by<em>xpath(&quot;//select[@name=&#39;name&#39;]&quot;)
all</em>options = element.find<em>elements</em>by<em>tag</em>name(&quot;option&quot;)
for option in all<em>options:
    print(&quot;Value is: %s&quot; % option.get</em>attribute(&quot;value&quot;))
    option.click()
```</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">Select</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">))</span>
<span class="n">select</span><span class="o">.</span><span class="n">select_by_index</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="n">select</span><span class="o">.</span><span class="n">select_by_visible_text</span><span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">)</span>
<span class="n">select</span><span class="o">.</span><span class="n">select_by_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">))</span>
<span class="n">select</span><span class="o">.</span><span class="n">deselect_all</span><span class="p">()</span>
</code></pre></div>
<h3>drag and drop</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;source&quot;</span><span class="p">)</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;target&quot;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="kn">import</span> <span class="n">ActionChains</span>
<span class="n">action_chains</span> <span class="o">=</span> <span class="n">ActionChains</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
<span class="n">action_chains</span><span class="o">.</span><span class="n">drag_and_drop</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
</code></pre></div>
<h3>moving between windows and frames</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">driver</span><span class="o">.</span><span class="n">switch_to_window</span><span class="p">(</span><span class="s">&quot;windowName&quot;</span><span class="p">)</span>
</code></pre></div>
<h3>notice</h3>

<p>if your page uses a lot of ajax on load then WebDriver may not know
when it has completely loaded.If you need to ensure such pages
are fully loaded then you can use <code>waits</code>.</p>

<h2>worldcup</h2>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>
<span class="n">perfix</span> <span class="o">=</span> <span class="s">&#39;http://www.fifa.com&#39;</span>

<span class="k">def</span> <span class="nf">fetchStatistic</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">meta</span><span class="p">):</span>
    <span class="n">rec</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">rec</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">generic</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">d</span><span class="p">(</span><span class="s">&#39;#generalStatsTopContainer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">html</span><span class="p">())</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;attacks&#39;</span><span class="p">,</span> <span class="s">&#39;shots&#39;</span><span class="p">,</span> <span class="s">&#39;delivery_penalty_area&#39;</span><span class="p">,</span> 
    <span class="s">&#39;clearances_attempted&#39;</span><span class="p">,</span> <span class="s">&#39;passes_completed&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">stat</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
        <span class="c">#print(&#39;basic&#39;, stat)</span>
        <span class="n">home</span> <span class="o">=</span> <span class="n">generic</span><span class="p">(</span><span class="s">&#39;[data-codename={}] [data-statref=home]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stat</span><span class="p">))</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">away</span> <span class="o">=</span> <span class="n">generic</span><span class="p">(</span><span class="s">&#39;[data-codename={}] [data-statref=away]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stat</span><span class="p">))</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">rec</span><span class="p">[</span><span class="n">stat</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;home&#39;</span><span class="p">:</span> <span class="n">home</span><span class="p">,</span> <span class="s">&#39;away&#39;</span><span class="p">:</span> <span class="n">away</span><span class="p">}</span>
        <span class="c">#print(home)</span>
        <span class="c">#print(away)</span>

    <span class="c">#for i, t in d(&#39;table.statistic-block  tr&#39;):</span>

    <span class="c">###fouls</span>
    <span class="n">fouls</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;#disciplinary .chart-container-donut-doubleside&#39;</span><span class="p">)</span>
    <span class="n">home_fouls</span> <span class="o">=</span> <span class="n">fouls</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="s">&#39;.chart-leftlabel&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">away_fouls</span> <span class="o">=</span> <span class="n">fouls</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="s">&#39;.chart-rightlabel&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">foulStat</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;#disciplinary .table.statistics-block tr&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">foulStat</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">foulStat</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">fc</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="c">#print(&#39; &#39;.join(fc), h, a)</span>
        <span class="n">rec</span><span class="p">[</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fc</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;home&#39;</span><span class="p">:</span> <span class="n">h</span><span class="p">,</span> <span class="s">&#39;away&#39;</span><span class="p">:</span><span class="n">a</span><span class="p">}</span>
    <span class="k">print</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
    <span class="c">#TODO insert into mongodb</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="s">&#39;http://www.fifa.com/worldcup/matches/index.html&#39;</span><span class="p">)</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;.match-list-date .mu.result&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">match</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">matches</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">matches</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>  
        <span class="n">href</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;.mu-i .mu-i-date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">rund</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;.mu-i .mu-i-group&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">home</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;.mu-m .t.home .t-nText&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">Score</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;.mu-m .s div.s-score&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
        <span class="n">homeScore</span> <span class="o">=</span> <span class="n">Score</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">awayScore</span> <span class="o">=</span> <span class="n">Score</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">away</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s">&#39;.mu-m .t.away .t-nText&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">statisticLink</span> <span class="o">=</span> <span class="n">href</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;index&#39;</span><span class="p">,</span><span class="s">&#39;statistics&#39;</span><span class="p">)</span> 

        <span class="k">print</span><span class="p">(</span><span class="n">home</span><span class="p">,</span> <span class="n">homeScore</span><span class="p">,</span> <span class="n">away</span><span class="p">,</span> <span class="n">awayScore</span><span class="p">)</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;game&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;home&#39;</span><span class="p">:</span><span class="n">home</span><span class="p">,</span> <span class="s">&#39;away&#39;</span><span class="p">:</span> <span class="n">away</span><span class="p">},</span>
                <span class="s">&#39;score&#39;</span><span class="p">:{</span><span class="s">&#39;home&#39;</span><span class="p">:</span><span class="n">homeScore</span><span class="p">,</span><span class="s">&#39;away&#39;</span><span class="p">:</span><span class="n">awayScore</span><span class="p">},</span>
                <span class="s">&#39;date&#39;</span><span class="p">:</span> <span class="n">date</span><span class="p">,</span>
                <span class="s">&#39;round&#39;</span><span class="p">:</span> <span class="n">rund</span><span class="p">}</span>
        <span class="n">fetchStatistic</span><span class="p">(</span><span class="n">perfix</span> <span class="o">+</span> <span class="n">statisticLink</span><span class="p">,</span> <span class="n">meta</span><span class="p">)</span>
        <span class="k">break</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c">#fetchStatistic(&#39;aa&#39;)</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<h2>world cup player statistics</h2>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://www.fifa.com/worldcup/matches/
and pdfs under each pages
</code></pre></div>
<h2>pdb commands</h2>

<ul>
<li>h(elp)</li>
<li>help command</li>
<li>c(ontinue)</li>
<li>q(uit)</li>
<li>b(reak)number</li>
<li>b path/to/file.py:number: set breakpoint at line No in specificc file</li>
<li>s(tep) </li>
<li>n(ext)</li>
<li>u(p) / d(own)</li>
<li>a(rgs)</li>
<li>debub statement</li>
<li>l(ist) statement</li>
<li>w(here)</li>
</ul>

<h2>mongo search</h2>
<div class="highlight"><pre><code class="language-text" data-lang="text">$where
db.product.find(
    {&quot;$where&quot; :function(){
        for (var cur in this) {
            for (var other in this) {
            if (cur != other &amp;&amp; this[cur] ==this[other])
            return true;
            }
        }
    return false
    }})
</code></pre></div>
</div>

<div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'allmonday'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
</div>
            </div>
          </div>
        </div>

    </body>
</html>
